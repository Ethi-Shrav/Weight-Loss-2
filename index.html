<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéØ AI Weight Loss Tracker</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { 
            margin: 0; 
            padding: 10px; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            min-height: 100vh; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .lucide { display: inline-block; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        // Lucide Icons Components
        const Camera = () => <svg className="lucide lucide-camera" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"></path><circle cx="12" cy="13" r="3"></circle></svg>;
        const Plus = () => <svg className="lucide lucide-plus" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M12 5v14m-7-7h14"></path></svg>;
        const Trash2 = () => <svg className="lucide lucide-trash-2" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M3 6h18m-2 0v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6m3 0V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><path d="M10 11v6m4-6v6"></path></svg>;
        const Target = () => <svg className="lucide lucide-target" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle></svg>;
        const Activity = () => <svg className="lucide lucide-activity" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M22 12h-4l-3 9L9 3l-3 9H2"></path></svg>;
        const Calendar = () => <svg className="lucide lucide-calendar" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M8 2v4m8-4v4M3 10h18M5 4h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2z"></path></svg>;
        const X = () => <svg className="lucide lucide-x" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M18 6L6 18M6 6l12 12"></path></svg>;

        // Your Advanced Weight Loss Tracker Component
        const AdvancedWeightLossTracker = () => {
            const [currentWeight, setCurrentWeight] = React.useState(75.5);
            const [targetWeight] = React.useState(60.0);
            const [startWeight] = React.useState(75.5);
            const [dailyCalories, setDailyCalories] = React.useState(0);
            const [caloriesBurned, setCaloriesBurned] = React.useState(0);
            const [activeTab, setActiveTab] = React.useState('dashboard');
            const [showCamera, setShowCamera] = React.useState(false);
            const [logs, setLogs] = React.useState([]);
            const [exercises, setExercises] = React.useState([]);
            const [meals, setMeals] = React.useState([]);
            const [selectedDate, setSelectedDate] = React.useState(new Date().toISOString().split('T')[0]);
            
            const videoRef = React.useRef(null);
            const canvasRef = React.useRef(null);

            // South Indian food database with calories
            const foodDatabase = {
                'idli': { calories: 39, portion: '1 piece' },
                'dosa': { calories: 168, portion: '1 medium' },
                'ragi dosa': { calories: 155, portion: '1 medium' },
                'upma': { calories: 150, portion: '1 cup' },
                'poha': { calories: 180, portion: '1 cup' },
                'brown rice': { calories: 55, portion: '1/4 cup cooked' },
                'sambar rice': { calories: 320, portion: '1 plate' },
                'curd rice': { calories: 280, portion: '1 plate' },
                'sambar': { calories: 85, portion: '1 bowl' },
                'rasam': { calories: 45, portion: '1 bowl' },
                'dal': { calories: 100, portion: '1 bowl' },
                'fish curry': { calories: 180, portion: '100g fish' },
                'chicken curry': { calories: 220, portion: '100g chicken' },
                'vegetable curry': { calories: 80, portion: '1 bowl' },
                'sundal': { calories: 120, portion: '1/2 cup' },
                'coconut chutney': { calories: 25, portion: '1 tbsp' },
                'buttermilk': { calories: 40, portion: '1 glass' }
            };

            // Exercise database with calories burned per minute
            const exerciseDatabase = {
                'badminton': { caloriesPerMin: 8, icon: 'üè∏' },
                'running': { caloriesPerMin: 12, icon: 'üèÉ‚Äç‚ôÇÔ∏è' },
                'walking': { caloriesPerMin: 4, icon: 'üö∂‚Äç‚ôÇÔ∏è' },
                'cycling': { caloriesPerMin: 9, icon: 'üö¥‚Äç‚ôÇÔ∏è' },
                'swimming': { caloriesPerMin: 11, icon: 'üèä‚Äç‚ôÇÔ∏è' },
                'yoga': { caloriesPerMin: 3, icon: 'üßò‚Äç‚ôÇÔ∏è' },
                'strength training': { caloriesPerMin: 6, icon: 'üí™' },
                'push-ups': { caloriesPerMin: 7, icon: 'üí™' },
                'squats': { caloriesPerMin: 8, icon: 'ü¶µ' },
                'burpees': { caloriesPerMin: 10, icon: 'üî•' }
            };

            // Calculate progress
            const weightLoss = startWeight - currentWeight;
            const progress = (weightLoss / (startWeight - targetWeight)) * 100;
            const netCalories = dailyCalories - caloriesBurned;
            const targetDailyCalories = 1550;

            React.useEffect(() => {
                updateDailyTotals();
            }, [selectedDate, meals, exercises]);

            const updateDailyTotals = () => {
                const todayMeals = meals.filter(meal => meal.date === selectedDate);
                const todayExercises = exercises.filter(ex => ex.date === selectedDate);
                
                const totalCalories = todayMeals.reduce((sum, meal) => sum + meal.calories, 0);
                const totalBurned = todayExercises.reduce((sum, ex) => sum + ex.caloriesBurned, 0);
                
                setDailyCalories(totalCalories);
                setCaloriesBurned(totalBurned);
            };

            const startCamera = async () => {
                alert('üì∏ Camera feature will analyze your meal! (Demo mode - manually add for now)');
            };

            const addMeal = (foodName, calories, method = 'Manual') => {
                const newMeal = {
                    id: Date.now(),
                    date: selectedDate,
                    name: foodName,
                    calories: parseInt(calories),
                    time: new Date().toLocaleTimeString(),
                    method: method
                };
                
                setMeals(prev => [...prev, newMeal]);
            };

            const addExercise = (exerciseName, duration) => {
                const exercise = exerciseDatabase[exerciseName.toLowerCase()];
                if (exercise) {
                    const caloriesBurned = exercise.caloriesPerMin * parseInt(duration);
                    
                    const newExercise = {
                        id: Date.now(),
                        date: selectedDate,
                        name: exerciseName,
                        duration: parseInt(duration),
                        caloriesBurned: caloriesBurned,
                        time: new Date().toLocaleTimeString()
                    };
                    
                    setExercises(prev => [...prev, newExercise]);
                }
            };

            const getMotivationMessage = () => {
                if (progress >= 100) return "üéâ Goal achieved! You're amazing!";
                if (progress >= 75) return `üî• Almost there! Keep pushing!`;
                if (progress >= 50) return `üí™ Halfway there! Keep going!`;
                if (progress >= 25) return `üåü Great progress! ${weightLoss.toFixed(1)}kg lost!`;
                if (weightLoss > 0) return `‚ú® You're on track! Every step counts!`;
                return "üéØ Your journey starts here! Log your first meal!";
            };

            const QuickFoodSearch = () => {
                const [search, setSearch] = React.useState('');
                const [quantity, setQuantity] = React.useState(1);
                
                const filteredFoods = Object.keys(foodDatabase).filter(food =>
                    food.toLowerCase().includes(search.toLowerCase())
                );

                return (
                    <div className="bg-gray-50 p-4 rounded-lg mb-4">
                        <h3 className="font-semibold mb-3">üçΩÔ∏è Quick Add Food</h3>
                        <div className="space-y-3">
                            <input
                                type="text"
                                placeholder="Search South Indian foods..."
                                value={search}
                                onChange={(e) => setSearch(e.target.value)}
                                className="w-full p-2 border rounded-lg"
                            />
                            <div className="flex gap-2">
                                <input
                                    type="number"
                                    placeholder="Qty"
                                    value={quantity}
                                    onChange={(e) => setQuantity(e.target.value)}
                                    className="w-20 p-2 border rounded-lg"
                                />
                                <span className="p-2">portions</span>
                            </div>
                            
                            {search && (
                                <div className="max-h-40 overflow-y-auto space-y-1">
                                    {filteredFoods.slice(0, 5).map(food => (
                                        <div
                                            key={food}
                                            className="flex justify-between items-center p-2 bg-white rounded border cursor-pointer hover:bg-blue-50"
                                            onClick={() => {
                                                addMeal(food, foodDatabase[food].calories * quantity);
                                                setSearch('');
                                                setQuantity(1);
                                            }}
                                        >
                                            <span className="capitalize">{food}</span>
                                            <span className="text-sm text-gray-600">
                                                {foodDatabase[food].calories * quantity} cal
                                            </span>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    </div>
                );
            };

            return (
                <div className="max-w-4xl mx-auto bg-white rounded-2xl shadow-2xl overflow-hidden">
                    {/* Header */}
                    <div className="bg-gradient-to-r from-purple-600 via-blue-600 to-teal-600 text-white p-6">
                        <div className="text-center">
                            <h1 className="text-3xl font-bold mb-2">üéØ AI Weight Loss Tracker</h1>
                            <p className="opacity-90">Advanced calorie tracking with meal recognition</p>
                        </div>
                    </div>

                    {/* Stats Dashboard */}
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4 p-6 bg-gray-50">
                        <div className="text-center bg-white p-4 rounded-lg shadow">
                            <div className="text-2xl font-bold text-blue-600">{currentWeight}</div>
                            <div className="text-sm text-gray-600">Current (kg)</div>
                        </div>
                        <div className="text-center bg-white p-4 rounded-lg shadow">
                            <div className="text-2xl font-bold text-green-600">{weightLoss.toFixed(1)}</div>
                            <div className="text-sm text-gray-600">Lost (kg)</div>
                        </div>
                        <div className="text-center bg-white p-4 rounded-lg shadow">
                            <div className="text-2xl font-bold text-orange-600">{dailyCalories}</div>
                            <div className="text-sm text-gray-600">Calories In</div>
                        </div>
                        <div className="text-center bg-white p-4 rounded-lg shadow">
                            <div className="text-2xl font-bold text-red-600">{caloriesBurned}</div>
                            <div className="text-sm text-gray-600">Burned</div>
                        </div>
                    </div>

                    {/* Progress Bar */}
                    <div className="px-6 pb-4">
                        <div className="bg-gray-200 rounded-full h-4 overflow-hidden">
                            <div 
                                className="bg-gradient-to-r from-green-400 to-blue-500 h-full transition-all duration-500"
                                style={{ width: `${Math.min(progress, 100)}%` }}
                            ></div>
                        </div>
                        <div className="text-center mt-2">
                            <span className="font-semibold">{Math.min(progress, 100).toFixed(1)}% Complete</span>
                            <div className="text-sm text-gray-600 mt-1">{getMotivationMessage()}</div>
                        </div>
                    </div>

                    {/* Calorie Balance */}
                    <div className="mx-6 mb-4 p-4 rounded-lg bg-gradient-to-r from-yellow-100 to-orange-100 border-l-4 border-orange-500">
                        <div className="flex justify-between items-center">
                            <div>
                                <span className="font-semibold">Net Calories: </span>
                                <span className={`text-lg font-bold ${netCalories > targetDailyCalories ? 'text-red-600' : 'text-green-600'}`}>
                                    {netCalories}
                                </span>
                                <span className="text-sm text-gray-600"> / {targetDailyCalories} target</span>
                            </div>
                            <div className="text-right">
                                <div className="text-sm">
                                    {netCalories > targetDailyCalories ? 
                                        `‚ö†Ô∏è ${netCalories - targetDailyCalories} over target` : 
                                        `‚úÖ ${targetDailyCalories - netCalories} under target`
                                    }
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Navigation Tabs */}
                    <div className="flex bg-gray-100">
                        {[
                            { id: 'dashboard', icon: Target, label: 'Dashboard' },
                            { id: 'meals', icon: Plus, label: 'Add Food' },
                            { id: 'exercise', icon: Activity, label: 'Exercise' }
                        ].map(tab => (
                            <button
                                key={tab.id}
                                onClick={() => setActiveTab(tab.id)}
                                className={`flex-1 flex items-center justify-center gap-2 p-4 ${
                                    activeTab === tab.id ? 'bg-blue-500 text-white' : 'text-gray-600 hover:bg-gray-200'
                                }`}
                            >
                                <tab.icon />
                                <span className="hidden sm:inline">{tab.label}</span>
                            </button>
                        ))}
                    </div>

                    {/* Tab Content */}
                    <div className="p-6">
                        {/* Dashboard Tab */}
                        {activeTab === 'dashboard' && (
                            <div className="space-y-6">
                                <div className="bg-gradient-to-r from-green-100 to-blue-100 p-4 rounded-lg border-l-4 border-green-500">
                                    <h3 className="font-semibold mb-2">üìä Today's Summary ({selectedDate})</h3>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <h4 className="font-medium mb-2">üçΩÔ∏è Meals Today</h4>
                                            {meals.filter(m => m.date === selectedDate).slice(-3).map(meal => (
                                                <div key={meal.id} className="flex justify-between text-sm">
                                                    <span>{meal.name}</span>
                                                    <span>{meal.calories} cal</span>
                                                </div>
                                            ))}
                                            {meals.filter(m => m.date === selectedDate).length === 0 && (
                                                <p className="text-gray-500 text-sm">No meals logged yet</p>
                                            )}
                                        </div>
                                        <div>
                                            <h4 className="font-medium mb-2">üí™ Exercises Today</h4>
                                            {exercises.filter(e => e.date === selectedDate).slice(-3).map(exercise => (
                                                <div key={exercise.id} className="flex justify-between text-sm">
                                                    <span>{exercise.name}</span>
                                                    <span>-{exercise.caloriesBurned} cal</span>
                                                </div>
                                            ))}
                                            {exercises.filter(e => e.date === selectedDate).length === 0 && (
                                                <p className="text-gray-500 text-sm">No exercises logged yet</p>
                                            )}
                                        </div>
                                    </div>
                                </div>

                                <div className="bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-500">
                                    <h3 className="font-semibold mb-2">üéØ Weight Log</h3>
                                    <div className="flex gap-2">
                                        <input
                                            type="number"
                                            step="0.1"
                                            placeholder="Enter today's weight"
                                            className="flex-1 p-2 border rounded-lg"
                                            id="weightInput"
                                        />
                                        <button
                                            onClick={() => {
                                                const input = document.getElementById('weightInput');
                                                if (input.value) {
                                                    setCurrentWeight(parseFloat(input.value));
                                                    input.value = '';
                                                    alert('Weight logged successfully!');
                                                }
                                            }}
                                            className="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600"
                                        >
                                            Log Weight
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Meals Tab */}
                        {activeTab === 'meals' && (
                            <div className="space-y-6">
                                <div className="text-center">
                                    <input
                                        type="date"
                                        value={selectedDate}
                                        onChange={(e) => setSelectedDate(e.target.value)}
                                        className="p-2 border rounded-lg mb-4"
                                    />
                                </div>

                                {/* AI Photo Recognition */}
                                <div className="bg-gradient-to-r from-purple-100 to-pink-100 p-4 rounded-lg border-l-4 border-purple-500">
                                    <h3 className="font-semibold mb-3">ü§ñ AI Meal Recognition</h3>
                                    <p className="text-sm text-gray-600 mb-3">Take a photo of your meal and let AI calculate calories!</p>
                                    <button
                                        onClick={startCamera}
                                        className="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white p-3 rounded-lg hover:from-purple-600 hover:to-pink-600 flex items-center justify-center gap-2"
                                    >
                                        <Camera />
                                        üì∏ Take Photo & Analyze
                                    </button>
                                </div>

                                <QuickFoodSearch />

                                {/* Custom Food Entry */}
                                <div className="bg-gray-50 p-4 rounded-lg mb-4">
                                    <h3 className="font-semibold mb-3">‚ûï Add Custom Food</h3>
                                    <div className="space-y-3">
                                        <input
                                            type="text"
                                            placeholder="Food name"
                                            id="customFood"
                                            className="w-full p-2 border rounded-lg"
                                        />
                                        <input
                                            type="number"
                                            placeholder="Calories"
                                            id="customCalories"
                                            className="w-full p-2 border rounded-lg"
                                        />
                                        <button
                                            onClick={() => {
                                                const food = document.getElementById('customFood').value;
                                                const calories = document.getElementById('customCalories').value;
                                                if (food && calories) {
                                                    addMeal(food, calories);
                                                    document.getElementById('customFood').value = '';
                                                    document.getElementById('customCalories').value = '';
                                                }
                                            }}
                                            className="w-full bg-green-500 text-white p-2 rounded-lg hover:bg-green-600"
                                        >
                                            Add Food
                                        </button>
                                    </div>
                                </div>

                                {/* Today's Meals */}
                                <div className="bg-gray-50 p-4 rounded-lg">
                                    <h3 className="font-semibold mb-3">üçΩÔ∏è Today's Meals ({dailyCalories} calories)</h3>
                                    <div className="space-y-2 max-h-60 overflow-y-auto">
                                        {meals.filter(meal => meal.date === selectedDate).map(meal => (
                                            <div key={meal.id} className="flex justify-between items-center bg-white p-3 rounded border">
                                                <div>
                                                    <div className="font-medium capitalize">{meal.name}</div>
                                                    <div className="text-xs text-gray-500">
                                                        {meal.time} ‚Ä¢ {meal.method}
                                                    </div>
                                                </div>
                                                <div className="text-right">
                                                    <div className="font-semibold">{meal.calories} cal</div>
                                                    <button
                                                        onClick={() => {
                                                            setMeals(prev => prev.filter(m => m.id !== meal.id));
                                                        }}
                                                        className="text-red-500 hover:text-red-700"
                                                    >
                                                        <Trash2 />
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                        {meals.filter(meal => meal.date === selectedDate).length === 0 && (
                                            <p className="text-gray-500 text-center py-4">No meals logged for today. Add your first meal above!</p>
                                        )}
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Exercise Tab */}
                        {activeTab === 'exercise' && (
                            <div className="space-y-6">
                                <div className="text-center">
                                    <input
                                        type="date"
                                        value={selectedDate}
                                        onChange={(e) => setSelectedDate(e.target.value)}
                                        className="p-2 border rounded-lg mb-4"
                                    />
                                </div>

                                {/* Exercise Entry */}
                                <div className="bg-gray-50 p-4 rounded-lg mb-4">
                                    <h3 className="font-semibold mb-3">üí™ Log Exercise</h3>
                                    <div className="space-y-3">
                                        <select id="exerciseSelect" className="w-full p-2 border rounded-lg">
                                            <option value="">Select Exercise</option>
                                            {Object.keys(exerciseDatabase).map(exercise => (
                                                <option key={exercise} value={exercise}>
                                                    {exerciseDatabase[exercise].icon} {exercise} ({exerciseDatabase[exercise].caloriesPerMin} cal/min)
                                                </option>
                                            ))}
                                        </select>
                                        <input
                                            type="number"
                                            placeholder="Duration (minutes)"
                                            id="durationInput"
                                            className="w-full p-2 border rounded-lg"
                                        />
                                        <button
                                            onClick={() => {
                                                const exercise = document.getElementById('exerciseSelect').value;
                                                const duration = document.getElementById('durationInput').value;
                                                if (exercise && duration) {
                                                    addExercise(exercise, duration);
                                                    document.getElementById('exerciseSelect').value = '';
                                                    document.getElementById('durationInput').value = '';
                                                }
                                            }}
                                            className="w-full bg-purple-500 text-white p-2 rounded-lg hover:bg-purple-600"
                                        >
                                            Log Exercise
                                        </button>
                                    </div>
                                </div>

                                {/* Today's Exercises */}
                                <div className="bg-gray-50 p-4 rounded-lg">
                                    <h3 className="font-semibold mb-3">üí™ Today's Exercises ({caloriesBurned} calories burned)</h3>
                                    <div className="space-y-2 max-h-60 overflow-y-auto">
                                        {exercises.filter(ex => ex.date === selectedDate).map(exercise => (
                                            <div key={exercise.id} className="flex justify-between items-center bg-white p-3 rounded border">
                                                <div>
                                                    <div className="font-medium capitalize">
                                                        {exerciseDatabase[exercise.name]?.icon} {exercise.name}
                                                    </div>
                                                    <div className="text-xs text-gray-500">
                                                        {exercise.time} ‚Ä¢ {exercise.duration} minutes
                                                    </div>
                                                </div>
                                                <div className="text-right">
                                                    <div className="font-semibold text-red-600">-{exercise.caloriesBurned} cal</div>
                                                    <button
                                                        onClick={() => {
                                                            setExercises(prev => prev.filter(e => e.id !== exercise.id));
                                                        }}
                                                        className="text-red-500 hover:text-red-700"
                                                    >
                                                        <Trash2 />
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                        {exercises.filter(ex => ex.date === selectedDate).length === 0 && (
                                            <p className="text-gray-500 text-center py-4">No exercises logged for today. Add your first workout above!</p>
                                        )}
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<AdvancedWeightLossTracker />);
    </script>
</body>
</html>
